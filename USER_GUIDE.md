# 使用指南

## 快速开始

1. **启动应用程序**
   ```bash
   # Windows用户双击运行
   start.bat
   
   # 或者使用命令行
   uv run python src/main.py
   ```

2. **加载DICOM图像**
   - 点击"加载DICOM"按钮
   - 选择您的DICOM文件
   - 图像将显示在左右两个窗口中

3. **调整窗宽窗位**
   - 使用窗宽滑块调整对比度范围
   - 使用窗位滑块调整亮度中心
   - 右侧窗口实时显示调整效果

4. **应用图像增强**
   - 选择左侧控制面板中的增强算法
   - 调整相关参数
   - 点击"应用"按钮查看效果

5. **图像交互操作**
   - **缩放**：使用鼠标滚轮
   - **拖放**：按住鼠标左键拖动
   - **重置**：双击图像窗口

## 主要功能说明

### 图像增强算法

#### 灰度变换
- **Gamma校正**：调整图像的亮度分布
  - Gamma < 1.0：增强暗部细节
  - Gamma > 1.0：增强亮部细节

#### 直方图调整
- **全局均衡化**：改善整体对比度
- **CLAHE**：自适应局部对比度增强

#### 空间域滤波
- **高斯滤波**：降噪，平滑图像
- **中值滤波**：去除椒盐噪声
- **非锐化掩模**：图像锐化，增强边缘

#### 形态学操作
- **腐蚀**：去除小的亮区域
- **膨胀**：填充小的暗区域
- **开运算**：先腐蚀后膨胀
- **闭运算**：先膨胀后腐蚀

### 视图控制

#### 缩放操作
- 向前滚动鼠标滚轮：放大
- 向后滚动鼠标滚轮：缩小
- 双击：重置视图

#### 拖放操作
- 按住鼠标左键：拖动图像
- 释放鼠标：停止拖动

#### 视图同步
- 勾选"同步视图"：两个窗口同步缩放和拖放
- 取消勾选：独立控制每个窗口

### 保存选项

#### 保存处理结果
- **保存此步结果(DICOM)**：保存16位高精度DICOM文件
- **保存预览图(PNG)**：保存8位预览图像

### 处理历史
- 控制面板显示最近5条处理记录
- 可以查看应用过的算法和参数

## 常见问题

### Q: 加载DICOM文件失败
A: 请确保文件是有效的DICOM格式，检查文件是否损坏

### Q: 图像显示异常
A: 检查DICOM文件是否为16位灰度图像

### Q: 处理速度慢
A: 大尺寸图像处理可能需要几秒钟时间，请耐心等待

### Q: 保存失败
A: 检查目标目录是否有写入权限

## 技术支持

如果遇到问题，请查看：
1. 程序状态栏的错误信息
2. 控制台输出的错误日志
3. 确保系统满足最低要求：
   - Python 3.11+
   - Windows 10/11
   - 至少4GB内存
   - 支持OpenGL的显卡